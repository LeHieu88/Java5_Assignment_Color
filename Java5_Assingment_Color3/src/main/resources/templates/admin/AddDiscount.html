<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>AdminLTE 3 | DataTables</title>

<!-- Google Font: Source Sans Pro -->
<!-- Google Font: Source Sans Pro -->
<link
	th:href="@{https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback}"
	rel="stylesheet" />
<!-- Font Awesome -->
<link th:href="@{/plugins/fontawesome-free/css/all.min.css}"
	rel="stylesheet" />
<!-- DataTables -->
<link
	th:href="@{/plugins/datatables-bs4/css/dataTables.bootstrap4.min.css}"
	rel="stylesheet" />
<link
	th:href="@{/plugins/datatables-responsive/css/responsive.bootstrap4.min.css}"
	rel="stylesheet" />
<link
	th:href="@{/plugins/datatables-buttons/css/buttons.bootstrap4.min.css}"
	rel="stylesheet" />
<!-- Theme style -->
<link th:href="@{/dist/css/adminlte.min.css}" rel="stylesheet" />
<!-- daterange picker -->
<link th:href="@{/plugins/daterangepicker/daterangepicker.css}"
	rel="stylesheet" />
<!-- iCheck for checkboxes and radio inputs -->
<link th:href="@{/plugins/icheck-bootstrap/icheck-bootstrap.min.css}"
	rel="stylesheet" />
<!-- Bootstrap Color Picker -->
<link
	th:href="@{/plugins/bootstrap-colorpicker/css/bootstrap-colorpicker.min.css}"
	rel="stylesheet" />
<!-- Tempusdominus Bootstrap 4 -->
<link
	th:href="@{/plugins/tempusdominus-bootstrap-4/css/tempusdominus-bootstrap-4.min.css}"
	rel="stylesheet" />
<!-- Select2 -->
<link th:href="@{/plugins/select2/css/select2.min.css}" rel="stylesheet" />
<link
	th:href="@{/plugins/select2-bootstrap4-theme/select2-bootstrap4.min.css}"
	rel="stylesheet" />
<!-- Bootstrap4 Duallistbox -->
<link
	th:href="@{/plugins/bootstrap4-duallistbox/bootstrap-duallistbox.min.css}"
	rel="stylesheet" />
<!-- BS Stepper -->
<link th:href="@{/plugins/bs-stepper/css/bs-stepper.min.css}"
	rel="stylesheet" />
<!-- dropzonejs -->
<link th:href="@{/plugins/dropzone/min/dropzone.min.css}"
	rel="stylesheet" />


</head>
<body class="hold-transition sidebar-mini">
	<!-- Site wrapper -->
	<div class="wrapper">
		<!-- Navbar -->
		<div th:replace="~{fragments/nav_admin :: nav}"></div>


		<!-- Content Wrapper. Contains page content -->
		<div class="content-wrapper">
			<!-- Content Header (Page header) -->
			<section class="content-header">
				<div class="container-fluid">
					<div class="row mb-2">
						<div class="col-sm-6">
							<h1>Thêm Nhà cung cấp</h1>
						</div>
						<div class="col-sm-6">
							<ol class="breadcrumb float-sm-right">
								<li class="breadcrumb-item"><a href="#">Trang chủ</a></li>
								<li class="breadcrumb-item active">Thêm Nhà cung cấp</li>
							</ol>
						</div>
					</div>
				</div>
				<!-- /.container-fluid -->
			</section>

			<!-- Main content -->
			<section class="content">
				<form th:action="@{/Admin/AddDiscount}" method="post"
					th:object="${MaGiamGia}" id="supplierForm">

					<div class="row">
						<div class="col-md-12">
							<div class="card card-primary">
								<div class="card-header">
									<h3 class="card-title">General</h3>

									<div class="card-tools">
										<button type="button" class="btn btn-tool"
											data-card-widget="collapse" title="Collapse">
											<i class="fas fa-minus"></i>
										</button>
									</div>
								</div>

								<div class="card-body">
									<div class="form-group">
										<label for="inputName">Mã</label> <input type="text"
											id="inputName" name="ma"
											th:class="${#fields.hasErrors('ma')} ? 'form-control is-invalid' : 'form-control'">
										<div th:if="${#fields.hasErrors('ma')}"
											class="error invalid-feedback">
											<p th:errors="*{ma}"></p>
										</div>
									</div>
									<div class="form-group">
										<label for="inputName">Giá trị</label> <input type="text"
											id="inputName" name="giaTri"
											th:class="${#fields.hasErrors('giaTri')} ? 'form-control is-invalid' : 'form-control'">
										<div th:if="${#fields.hasErrors('giaTri')}"
											class="error invalid-feedback">
											<p th:errors="*{giaTri}"></p>
										</div>
									</div>
									<div class="form-group">
										<label>Date range:</label>
										<div class="input-group">
											<div class="input-group-prepend">
												<span class="input-group-text"> <i
													class="far fa-calendar-alt"></i>
												</span>
											</div>
											<input type="text" class="form-control float-right"
												id="reservation">
										</div>
									</div>
									<br> <input hidden id="start_date" name="_ngayBatDau">
									<br> <br> <input hidden id="end_date"
										name="_ngayKetThuc">

									<div class="form-group">
										<label for="inputName">Số lượng</label> <input type="number"
											id="inputName" name="soLuongSanPham"
											th:class="${#fields.hasErrors('soLuongSanPham')} ? 'form-control is-invalid' : 'form-control'">
										<div th:if="${#fields.hasErrors('soLuongSanPham')}"
											class="error invalid-feedback">
											<p th:errors="*{soLuongSanPham}"></p>
										</div>
									</div>
									<div class="card card-default">

										<!-- /.card-header -->
										<div class="card-body">
											<div class="row">
												<div class="col-12">
													<div class="form-group">
														<label for="selectedProducts">Sản phẩm áp dụng mã</label>
														<select id="selectedProducts" name="selectedProducts"
															class="duallistbox" multiple="multiple">
															<option th:each="sanPham : ${listSanPham}"
																th:value="${sanPham.id}" th:text="${sanPham.tenSanPham}"></option>
														</select>
													</div>
												</div>
											</div>
										</div>

										<!-- /.card-body -->

									</div>
								</div>
								<!-- /.card-body -->
							</div>
							<!-- /.card -->
						</div>
					</div>
					<div class="row">
						<div class="col-12">
							<a href="#" class="btn btn-secondary">Cancel</a>
							<button type="submit" class="btn btn-success float-right">Tạo
								mã giảm giá mới</button>
						</div>
					</div>
				</form>
			</section>

			<!-- /.content -->
		</div>
		<!-- /.content-wrapper -->



		<!-- Control Sidebar -->
		<aside class="control-sidebar control-sidebar-dark">
			<!-- Control sidebar content goes here -->
		</aside>
		<!-- /.control-sidebar -->
	</div>
	<!-- ./wrapper -->
	<!-- jQuery -->
	<!-- jQuery -->
	<!-- jQuery -->
	<script th:src="@{/plugins/jquery/jquery.min.js}"></script>
	<!-- Bootstrap 4 -->
	<script th:src="@{/plugins/bootstrap/js/bootstrap.bundle.min.js}"></script>
	<!-- DataTables & Plugins -->
	<script th:src="@{/plugins/datatables/jquery.dataTables.min.js}"></script>
	<script
		th:src="@{/plugins/datatables-bs4/js/dataTables.bootstrap4.min.js}"></script>
	<script
		th:src="@{/plugins/datatables-responsive/js/dataTables.responsive.min.js}"></script>
	<script
		th:src="@{/plugins/datatables-responsive/js/responsive.bootstrap4.min.js}"></script>
	<script
		th:src="@{/plugins/datatables-buttons/js/dataTables.buttons.min.js}"></script>
	<script
		th:src="@{/plugins/datatables-buttons/js/buttons.bootstrap4.min.js}"></script>
	<script th:src="@{/plugins/jszip/jszip.min.js}"></script>
	<script th:src="@{/plugins/pdfmake/pdfmake.min.js}"></script>
	<script th:src="@{/plugins/pdfmake/vfs_fonts.js}"></script>
	<script th:src="@{/plugins/datatables-buttons/js/buttons.html5.min.js}"></script>
	<script th:src="@{/plugins/datatables-buttons/js/buttons.print.min.js}"></script>
	<script
		th:src="@{/plugins/datatables-buttons/js/buttons.colVis.min.js}"></script>
	<!-- AdminLTE App -->
	<script th:src="@{/dist/js/adminlte.min.js}"></script>
	<!-- AdminLTE for demo purposes -->
	<script th:src="@{/dist/js/demo.js}"></script>
	<script th:src="@{/plugins/jquery-validation/jquery.validate.min.js}"></script>
	<!-- Select2 -->
	<script th:src="@{/plugins/select2/js/select2.full.min.js}"></script>
	<!-- Bootstrap4 Duallistbox -->
	<script
		th:src="@{/plugins/bootstrap4-duallistbox/jquery.bootstrap-duallistbox.min.js}"></script>
	<!-- InputMask -->
	<script th:src="@{/plugins/moment/moment.min.js}"></script>
	<script th:src="@{/plugins/inputmask/jquery.inputmask.min.js}"></script>
	<!-- date-range-picker -->
	<script th:src="@{/plugins/daterangepicker/daterangepicker.js}"></script>
	<!-- bootstrap color picker -->
	<script
		th:src="@{/plugins/bootstrap-colorpicker/js/bootstrap-colorpicker.min.js}"></script>
	<!-- Tempusdominus Bootstrap 4 -->
	<script
		th:src="@{/plugins/tempusdominus-bootstrap-4/js/tempusdominus-bootstrap-4.min.js}"></script>
	<!-- Bootstrap Switch -->
	<script
		th:src="@{/plugins/bootstrap-switch/js/bootstrap-switch.min.js}"></script>
	<!-- BS-Stepper -->
	<script th:src="@{/plugins/bs-stepper/js/bs-stepper.min.js}"></script>
	<!-- dropzonejs -->
	<script th:src="@{/plugins/dropzone/min/dropzone.min.js}"></script>


	<!-- Page specific script -->
	<script>
		document
				.getElementById('supplierForm')
				.addEventListener(
						'submit',
						function(event) {
							// Ngăn chặn gửi form mặc định
							event.preventDefault();

							// Lấy danh sách các sản phẩm được chọn
							var selectedProducts = Array
									.from(
											document
													.querySelectorAll('#selectedProducts option:checked'))
									.map(function(option) {
										return option.value;
									});

							// Kiểm tra xem có giá trị nào được chọn hay không
							if (selectedProducts.length === 0) {
								// Hiển thị thông báo ngẫu nhiên
								var messages = [
										"Vui lòng chọn ít nhất một sản phẩm.",
										"Hãy chọn một sản phẩm trước khi gửi." ];
								var randomIndex = Math.floor(Math.random()
										* messages.length);
								alert(messages[randomIndex]);
								return;
							}

							// Gửi danh sách các sản phẩm được chọn đến server hoặc thực hiện xử lý khác
							console.log(selectedProducts.value);

							// Tiếp tục gửi form (nếu cần thiết)
							this.submit();
						});
	</script>


	<script>
		$(function() {
			$("#example1").DataTable(
					{
						"responsive" : true,
						"lengthChange" : false,
						"autoWidth" : false,
						"buttons" : [ "copy", "csv", "excel", "pdf", "print",
								"colvis" ]
					}).buttons().container().appendTo(
					'#example1_wrapper .col-md-6:eq(0)');
			$('#example2').DataTable({
				"paging" : true,
				"lengthChange" : false,
				"searching" : false,
				"ordering" : true,
				"info" : true,
				"autoWidth" : false,
				"responsive" : true,
			});
		});
	</script>

	<script>
		$(document).ready(function() {
			$('#reservation').daterangepicker();

			// Lắng nghe sự kiện thay đổi giá trị của "Date range"
			$('#reservation').on('apply.daterangepicker', function(ev, picker) {
				var startDate = picker.startDate.format('YYYY-MM-DD');
				var endDate = picker.endDate.format('YYYY-MM-DD');

				console.log('Ngày bắt đầu:', startDate);
				console.log('Ngày kết thúc:', endDate);

				// Gán giá trị vào các trường input ẩn
				$('#start_date').val(startDate);
				$('#end_date').val(endDate);
			});
		});
		//Bootstrap Duallistbox
		$('.duallistbox').bootstrapDualListbox()

		//Colorpicker
		$('.my-colorpicker1').colorpicker()
		//color picker with addon
		$('.my-colorpicker2').colorpicker()

		$('.my-colorpicker2').on(
				'colorpickerChange',
				function(event) {
					$('.my-colorpicker2 .fa-square').css('color',
							event.color.toString());
				})

		$("input[data-bootstrap-switch]").each(function() {
			$(this).bootstrapSwitch('state', $(this).prop('checked'));
		})
	</script>

	<script>
		$(function() {
			$('#supplierForm').validate({

				errorElement : 'span',
				errorPlacement : function(error, element) {
					error.addClass('invalid-feedback');
					element.closest('.form-group').append(error);
				},
				highlight : function(element, errorClass, validClass) {
					$(element).addClass('is-invalid');
				},
				unhighlight : function(element, errorClass, validClass) {
					$(element).removeClass('is-invalid');
				}
			});
		});
	</script>
</body>
</html>
